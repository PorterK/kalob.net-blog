language: node_js
sudo: required
node_js:
- 11.15.0
branches:
  only:
  - master
cache:
  yarn: true
install:
- yarn global add travis-ci-cloudfront-invalidation
- yarn install
script: yarn build
deploy:
  provider: s3
  access_key_id: AKIAQA7PB7JLLRE6IYGC
  secret_access_key:
    secure: smHXVuDhrMaq7YWL/XEdh/vIBrnz62W/jS7OTG0BYg/+9PdqoroK2IS2ZUQ48kFsIviBp+KsbY3BkGkjerodtH21YkrROQFNk7JfXr5QFmUohQWa14rWD0UueIeGRnTGlhXHOTAVVsi/nm9rbhYxh9lby/YK/NT9d4pLuW5oyER0fdN49hmYGtwRD3c66SuLvFU7SlBpuicHRol8Dvnwd6Brb81Ie41YubacZdwbsh1e6ECfnwviGeCmNCuVSYLnKiYPmTQbRbIu2F82sgvcdRr7iZ/nt62ZsDMWpuPR1CpiZ+e8x8EEkySHqh9L3twE8Pzjg3m4PcUN8uTilmpSCT+adJJI9hhjyLBwUwEmiuHTMyXXd7G+9pJ5mtl1d0jL5lxPzIAziKUy+e1aoknhfNOXwig6gDlrbIWhGoAus83teLeUlOnXz9sVSg49AGycZHHWgZ0LZIT8RhwTTu/cnHnqc55BAAJ3nJfY3DgFWzEzvaVeYejslkS0H/SBPG3ADkbHJv22SZnU19S/abKXWpJE1PaDg7qdMCZbmPXOfWA5pJgMxdPzXbgPIvAVEod5wLmrTJK+YF4/UFiL3PPSYN8KAI/7PGPIh55aS4Y1x/coQ6QjISX+Djx+W53+MeFJxjgw1zArmHHxFuCFe7bOplNxmk/CXvzqz+M0Dz2h1ss=
  bucket: kalob.net-blog
  skip_cleanup: true
  local-dir: build
  acl: public_read
  region: us-east-2
  on:
    repo: PorterK/kalob.net-blog
after_deploy:
- travis-ci-cloudfront-invalidation -a $AWS_CLOUDFRONT_ACCESS_KEY -s $AWS_CLOUDFRONT_SECRET
  -c $AWS_CLOUDFRONT_DIST_ID -i '/*' -b $TRAVIS_BRANCH -p $TRAVIS_PULL_REQUEST
